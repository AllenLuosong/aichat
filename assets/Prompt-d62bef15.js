import{d as g,Z as y,h as c,a1 as w,r as C,B as x,F as N,W as r,U as u,D as e,aV as b,ag as B,af as I,Q as P,P as R,N as S,ab as _,aU as k,aW as U}from"./index-aa375069.js";const z=g({__name:"Prompt",props:{visible:{type:Boolean},roomId:null},emits:["update:visible"],setup(d,{emit:m}){const p=d,f=y(),t=c(()=>f.getChatHistoryByCurrentActive),i=w(),n=C(!1),v="设定当前会话角色",s=c({get(){return p.visible},set(a){m("update:visible",a)}});async function h(){if(!(!t.value||!t.value)){n.value=!0;try{const{message:a}=await U(t.value.prompt??"",+p.roomId);i.success(a),s.value=!1}catch(a){i.error(a.message)}n.value=!1}}return(a,o)=>(x(),N(e(k),{show:e(s),"onUpdate:show":o[1]||(o[1]=l=>_(s)?s.value=l:null),"auto-focus":!1,class:"custom-card",preset:"card",style:{width:"600px"},title:v,size:"huge",bordered:!1},{footer:r(()=>[u(e(b),{justify:"end"},{default:r(()=>[u(e(B),{loading:n.value,type:"success",onClick:h},{default:r(()=>[I(P(e(R)("common.save")),1)]),_:1},8,["loading"])]),_:1})]),default:r(()=>[u(e(S),{value:e(t)&&e(t).prompt,type:"textarea",autosize:{minRows:4,maxRows:10},placeholder:"[默认] 你是ChatGPT，一个由OpenAI训练的大型语言模型。请仔细遵循用户的说明，解答用户提出的各类问题。使用markdown进行响应。（更多角色设定请左侧查看提示词 - 在线）",onInput:o[0]||(o[0]=l=>{e(t)&&(e(t).prompt=l)})},null,8,["value"])]),_:1},8,["show"]))}});export{z as default};
