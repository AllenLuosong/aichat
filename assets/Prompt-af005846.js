import{d as y,a0 as g,h as c,a3 as w,r as C,B as x,F as N,X as r,U as u,D as e,aW as B,ah as b,W as I,Q as P,P as R,N as S,ad as _,aV as k,aX as U}from"./index-06173c2f.js";const z=y({__name:"Prompt",props:{visible:{type:Boolean},roomId:null},emits:["update:visible"],setup(d,{emit:m}){const p=d,f=g(),t=c(()=>f.getChatHistoryByCurrentActive),i=w(),n=C(!1),h="设定当前会话角色",s=c({get(){return p.visible},set(a){m("update:visible",a)}});async function v(){if(!(!t.value||!t.value)){n.value=!0;try{const{message:a}=await U(t.value.prompt??"",+p.roomId);i.success(a),s.value=!1}catch(a){i.error(a.message)}n.value=!1}}return(a,o)=>(x(),N(e(k),{show:e(s),"onUpdate:show":o[1]||(o[1]=l=>_(s)?s.value=l:null),"auto-focus":!1,class:"custom-card",preset:"card",style:{width:"600px"},title:h,size:"huge",bordered:!1},{footer:r(()=>[u(e(B),{justify:"end"},{default:r(()=>[u(e(b),{loading:n.value,type:"success",onClick:v},{default:r(()=>[I(P(e(R)("common.save")),1)]),_:1},8,["loading"])]),_:1})]),default:r(()=>[u(e(S),{value:e(t)&&e(t).prompt,type:"textarea",autosize:{minRows:4,maxRows:10},placeholder:"[默认] 你是ChatGPT，一个由OpenAI训练的大型语言模型。请仔细遵循用户的说明，解答用户提出的各类问题。使用markdown进行响应。（更多角色设定请左侧查看提示词 - 在线）",onInput:o[0]||(o[0]=l=>{e(t)&&(e(t).prompt=l)})},null,8,["value"])]),_:1},8,["show"]))}});export{z as default};
