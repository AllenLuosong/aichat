import{d as y,a1 as g,h as c,U as w,r as C,B as x,F as N,Y as r,W as u,D as e,aT as B,af as S,X as b,Q as I,L as R,N as _,aa as k,aS as P,aU as U}from"./index-2b6bd752.js";const z=y({__name:"Prompt",props:{visible:{type:Boolean},roomId:null},emits:["update:visible"],setup(d,{emit:m}){const p=d,f=g(),t=c(()=>f.getChatHistoryByCurrentActive),i=w(),n=C(!1),v="设定当前会话角色",s=c({get(){return p.visible},set(a){m("update:visible",a)}});async function h(){if(!(!t.value||!t.value)){n.value=!0;try{const{message:a}=await U(t.value.prompt??"",+p.roomId);i.success(a),s.value=!1}catch(a){i.error(a.message)}n.value=!1}}return(a,o)=>(x(),N(e(P),{show:e(s),"onUpdate:show":o[1]||(o[1]=l=>k(s)?s.value=l:null),"auto-focus":!1,class:"custom-card",preset:"card",style:{width:"600px"},title:v,size:"huge",bordered:!1},{footer:r(()=>[u(e(B),{justify:"end"},{default:r(()=>[u(e(S),{loading:n.value,type:"success",onClick:h},{default:r(()=>[b(I(e(R)("common.save")),1)]),_:1},8,["loading"])]),_:1})]),default:r(()=>[u(e(_),{value:e(t)&&e(t).prompt,type:"textarea",autosize:{minRows:4,maxRows:10},placeholder:"[默认] 你是ChatGPT，一个由OpenAI训练的大型语言模型。请仔细遵循用户的说明，解答用户提出的各类问题。使用markdown进行响应。（更多角色设定请左侧查看提示词 - 在线）",onInput:o[0]||(o[0]=l=>{e(t)&&(e(t).prompt=l)})},null,8,["value"])]),_:1},8,["show"]))}});export{z as default};
